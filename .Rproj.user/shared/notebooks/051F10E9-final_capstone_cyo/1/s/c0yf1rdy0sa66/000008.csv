"0","## Create a PCA recipe"
"0","pca_recipe <- recipe(activity ~ ., data = fall_train)"
"0",""
"0","## Do the PCA analysis"
"0","pca_trans <- pca_recipe %>% "
"0","  "
"0","  ## Ensure all predictors have a mean of zero"
"0","  step_center(all_predictors()) %>% "
"0","  "
"0","  ## Ensure all predictors have a standard deviation of one"
"0","  step_scale(all_predictors()) %>% "
"0","  "
"0","  ## Run the principal components analysis"
"0","  step_pca(all_predictors()) %>% "
"0","  "
"0","  ## Apply adjustment to deal with outliers"
"0","  step_spatialsign(all_predictors()) %>% "
"0","  "
"0","  ## Adjust data to deal with missing values"
"0","  step_upsample(activity, over_ratio = 1) %>% "
"0","  "
"0","  ## Appply alll the steps above and generate new dataset."
"0","  prep()"
